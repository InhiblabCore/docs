import{r as I,j as V,k as w,u as f}from"../app.fefc8ec7.js";import{i as v}from"./stringify.7c979077.js";function m(l){return typeof l=="function"}function J(l){function z(t,e){let a;try{a=l()}catch(r){console.error(r)}const d=r=>e!=null&&e.serializer?e==null?void 0:e.serializer(r):JSON.stringify(r),h=r=>e!=null&&e.deserializer?e==null?void 0:e.deserializer(r):JSON.parse(r);function S(){try{const r=a==null?void 0:a.getItem(f(t));if(r)return h(r)}catch(r){console.error(r)}return m(e==null?void 0:e.defaultValue)?e==null?void 0:e.defaultValue():e==null?void 0:e.defaultValue}const c=I(S());V(()=>{t&&(c.value=S())});const n=r=>{if(typeof r=="undefined")c.value=void 0,a==null||a.removeItem(f(t));else if(m(r)){const u=r(c.value);try{c.value=u,a==null||a.setItem(f(t),d(u))}catch(y){console.error(y)}}else try{c.value=r,a==null||a.setItem(f(t),d(r))}catch(u){console.error(u)}};return[w(c),n]}return z}const i=J(()=>v?localStorage:void 0);export{i as u};
