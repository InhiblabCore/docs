import"./stringify.dc8c2ebb.js";import"./intersection-observer.38c1bba6.js";import{r as F,s as B,g as J,e as T,m as E,o as n,c as i,u as e,B as k,F as N,n as D,b as L,C as H,w,q as C,t as M,a as R,x as K,y as Q}from"../app.a1bd5cfe.js";import{u as G}from"./useRequest.efa49331.js";import{u as W}from"./index.daa0a2c3.js";import{g as X}from"./domTarget.7a691d57.js";import{u as z}from"./index.64d8679d.js";const tt=f=>f===document||f===document.body?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):f.scrollTop,et=f=>f.scrollHeight||Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),ot=f=>f.clientHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight),P=(f,c={})=>{const{target:v,isNoMore:_,threshold:d=100,reloadDeps:y=[],manual:x,onBefore:u,onSuccess:m,onError:t,onFinally:s}=c,l=F(),[o,{set:r}]=W(),p=g=>{l.value=g},a=B(()=>_?_(l.value):!1),{loading:I,run:b,runAsync:h,cancel:Z}=G(async g=>{const $=await f(g);return g?l.value={...$,list:[...g.list,...$.list]}:l.value=$,$},{manual:x,onFinally:(g,$,S)=>{r(!1),s==null||s($,S)},onBefore:()=>u==null?void 0:u(),onSuccess:g=>{setTimeout(()=>{A()}),m==null||m(g)},onError:g=>t==null?void 0:t(g)}),V=()=>{a.value||(r(!0),b(l.value))},q=()=>{if(!a.value)return r(!0),h(l.value)},O=()=>b(),U=()=>h(),A=()=>{const g=X(v);if(!g)return;const $=tt(g),S=et(g),j=ot(g);S-$<=j+d&&V()};z("scroll",()=>{I.value||o.value||A()},{target:v}),J(y,()=>{b()});const Y=B(()=>o.value&&I.value);return{data:l,loading:Y,loadingMore:o,noMore:a,loadMore:V,loadMoreAsync:q,reload:O,reloadAsync:U,mutate:p,scrollMethod:A,cancel:Z}},nt={key:0},st={style:{"margin-top":"8px"}},rt={key:1},lt={key:0},Nt=T({__name:"demo",setup(f){const c=["0","1","2","3","4","5","6","7","8","9","10","11","12","13"];function v(u,m){let t=0;u&&(t=c.findIndex(r=>r===u));const s=t+m,l=c.slice(t,s),o=c.length>=s?c[s]:void 0;return new Promise(r=>{setTimeout(()=>{r({list:l,nextId:o})},1e3)})}const{data:_,loading:d,loadMore:y,loadingMore:x}=P(u=>v(u==null?void 0:u.nextId,4));return(u,m)=>{var s,l,o;const t=E("vhp-button");return n(),i("div",null,[e(d)?(n(),i("p",nt)):k("",!0),(n(!0),i(N,null,D((s=e(_))==null?void 0:s.list,r=>(n(),i("div",{key:r,style:{padding:"12px",border:"1px solid #f5f5f5","text-align":"center"}},M(r),1))),128)),L("div",st,[(l=e(_))!=null&&l.nextId?(n(),H(t,{key:0,type:"button",onClick:m[0]||(m[0]=()=>e(y)()),disabled:e(x)},{default:w(()=>[C(M(e(x)?"Loading more...":"Click to load more"),1)]),_:1},8,["disabled"])):(n(),i("p",rt,[(o=e(_))!=null&&o.nextId?k("",!0):(n(),i("span",lt,"No more data"))]))])])}}}),it={key:0},at={style:{"margin-top":"8px"}},dt={key:1},ut={key:0},Dt=T({__name:"demo1",setup(f){const v=["0","1","2","3","4","5","6","7","8","9","10","11","12","13"];function _(t,s){const l=(t-1)*s,o=t*s,r=v.slice(l,o);return new Promise(p=>{setTimeout(()=>{p({list:r,total:v.length})},1e3)})}const{data:d,loading:y,loadMore:x,loadingMore:u}=P(t=>{const s=t?Math.ceil(t.list.length/4)+1:1;return _(s,4)}),m=B(()=>{var t;return d.value&&((t=d.value)==null?void 0:t.list.length)<d.value.total});return(t,s)=>{var o;const l=E("vhp-button");return n(),i("div",null,[e(y)?(n(),i("p",it)):k("",!0),(n(!0),i(N,null,D((o=e(d))==null?void 0:o.list,r=>(n(),i("div",{key:r,style:{padding:"12px",border:"1px solid #f5f5f5","text-align":"center"}},M(r),1))),128)),L("div",at,[e(m)?(n(),H(l,{key:0,type:"button",onClick:s[0]||(s[0]=()=>e(x)()),disabled:e(u)},{default:w(()=>[C(M(e(u)?"Loading more...":"Click to load more"),1)]),_:1},8,["disabled"])):(n(),i("p",dt,[e(m)?k("",!0):(n(),i("span",ut,"No more data"))]))])])}}}),ct={key:0},pt={style:{"margin-top":"8px"}},mt={key:1},_t={key:0},Ht=T({__name:"demo2",setup(f){const c=["0","1","2","3","4","5","6","7","8","9","10","11","12","13"];function v(t,s){let l=0;t&&(l=c.findIndex(a=>a===t));const o=l+s,r=c.slice(l,o),p=c.length>=o?c[o]:void 0;return new Promise(a=>{setTimeout(()=>{a({list:r,nextId:p})},1e3)})}const _=F(),{data:d,loading:y,loadMore:x,loadingMore:u,noMore:m}=P(t=>v(t==null?void 0:t.nextId,4),{target:_,isNoMore:t=>(t==null?void 0:t.nextId)===void 0});return(t,s)=>{var o;const l=E("vhp-button");return n(),i("div",{ref_key:"domRef",ref:_,style:{height:"150px",overflow:"auto",border:"1px solid",padding:"12px"}},[e(y)?(n(),i("p",ct)):k("",!0),(n(!0),i(N,null,D((o=e(d))==null?void 0:o.list,r=>(n(),i("div",{key:r,style:{padding:"12px",border:"1px solid #f5f5f5","text-align":"center"}},M(r),1))),128)),L("div",pt,[e(m)?(n(),i("p",mt,[e(m)?(n(),i("span",_t,"No more data")):k("",!0)])):(n(),H(l,{key:0,type:"button",onClick:s[0]||(s[0]=()=>e(x)()),disabled:e(u)},{default:w(()=>[C(M(e(u)?"Loading more...":"Click to load more"),1)]),_:1},8,["disabled"]))])],512)}}}),gt={style:{"margin-bottom":"16px"}},ft={key:0},vt={style:{"margin-top":"8px"}},xt={key:1},yt={key:0},Pt=T({__name:"demo3",setup(f){const c=["0","1","2","3","4","5","6","7","8","9","10","11","12","13"];function v(t,s){let l=0;t&&(l=c.findIndex(a=>a===t));const o=l+s,r=c.slice(l,o),p=c.length>=o?c[o]:void 0;return new Promise(a=>{setTimeout(()=>{a({list:r,nextId:p})},1e3)})}const _=F(""),{data:d,loading:y,loadMore:x,loadingMore:u,reload:m}=P(t=>v(t==null?void 0:t.nextId,4),{reloadDeps:[_]});return(t,s)=>{var o,r,p;const l=E("vhp-button");return n(),i("div",null,[R(l,{onClick:s[0]||(s[0]=()=>e(m)()),style:{"margin-bottom":"8px"}},{default:w(()=>[C(" Reset ")]),_:1}),L("div",gt,[C("Change will be reset\uFF1A"),K(L("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>_.value=a)},null,512),[[Q,_.value]])]),e(y)?(n(),i("p",ft)):k("",!0),(n(!0),i(N,null,D((o=e(d))==null?void 0:o.list,a=>(n(),i("div",{key:a,style:{padding:"12px",border:"1px solid #f5f5f5","text-align":"center"}},M(a),1))),128)),L("div",vt,[(r=e(d))!=null&&r.nextId?(n(),H(l,{key:0,type:"button",onClick:s[2]||(s[2]=()=>e(x)()),disabled:e(u)},{default:w(()=>[C(M(e(u)?"Loading more...":"Click to load more"),1)]),_:1},8,["disabled"])):(n(),i("p",xt,[(p=e(d))!=null&&p.nextId?k("",!0):(n(),i("span",yt,"No more data"))]))])])}}}),ht={key:0},bt={style:{"margin-top":"8px"}},kt={key:1},Mt={key:0},At=T({__name:"demo4",setup(f){const c=["0","1","2","3","4","5","6","7","8","9","10","11","12","13"];function v(o,r){let p=0;o&&(p=c.findIndex(h=>h===o));const a=p+r,I=c.slice(p,a),b=c.length>=a?c[a]:void 0;return new Promise(h=>{setTimeout(()=>{h({list:I,nextId:b})},1e3)})}function _(o){return new Promise(r=>{setTimeout(()=>{r()},1e3)})}const{data:d,loading:y,loadMore:x,loadingMore:u,mutate:m}=P(o=>v(o==null?void 0:o.nextId,4)),{loading:t,params:s,run:l}=G(_,{manual:!0,onSuccess:(o,[r])=>{var p,a;if(d.value){const I=(p=d.value)==null?void 0:p.list.findIndex(b=>b===r);(a=d==null?void 0:d.value)==null||a.list.splice(I,1),m({...d.value})}}});return(o,r)=>{var a,I,b;const p=E("vhp-button");return n(),i("div",null,[e(y)?(n(),i("p",ht)):k("",!0),(n(!0),i(N,null,D((a=e(d))==null?void 0:a.list,h=>(n(),i("div",{key:h,style:{padding:"12px",border:"1px solid #f5f5f5","text-align":"center"}},[C(M(h)+" ",1),R(p,{style:{"margin-left":"8px"},disabled:e(t)&&e(s)[0]===h,onClick:()=>e(l)(h)},{default:w(()=>[C(" delete")]),_:2},1032,["disabled","onClick"])]))),128)),L("div",bt,[(I=e(d))!=null&&I.nextId?(n(),H(p,{key:0,type:"button",onClick:r[0]||(r[0]=()=>e(x)()),disabled:e(u)},{default:w(()=>[C(M(e(u)?"Loading more...":"Click to load more"),1)]),_:1},8,["disabled"])):(n(),i("p",kt,[(b=e(d))!=null&&b.nextId?k("",!0):(n(),i("span",Mt,"No more data"))]))])])}}});export{Nt as _,Dt as a,Ht as b,Pt as c,At as d};
