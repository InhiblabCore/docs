import"./stringify.e9f6b35e.js";import"./intersection-observer.38c1bba6.js";import{u as g}from"./index.c6e750c1.js";import{d as P,r as l,o as f,c as _,f as T,t as w,F as A,n as N}from"../app.6a1f7318.js";function b({task:t,option:u}){const{delay:a=0,onError:i,onReady:o,onSuccess:m}=u!=null?u:{};if(!(t instanceof Array))throw new Error("task must be Array");const r=e=>{i==null||i(e)},n=e=>c=>{r(c),e==null||e({error:c})},p=()=>{var e;(e=Array(...t.keys()))==null||e.reduce((c,d)=>c.then(s=>(s!=null&&s.error||m==null||m(s),new Promise(h=>{var y;(y=t==null?void 0:t[d])==null||y.call(t,h,n(h),d)}))),Promise.resolve())};g(()=>{o==null||o(),p()},a)}const C=P({__name:"demo",setup(t){const u=l(0),a=l([]);function i(){return new Promise((r,n)=>{setTimeout(()=>{r("No.1")},3e3)})}function o(){return new Promise((r,n)=>{setTimeout(()=>{r("No.2")},2e3)})}function m(){return new Promise((r,n)=>{setTimeout(()=>{r("No.3")},2e3)})}return b({task:[r=>{i().then(n=>{r==null||r(n)})},r=>{o().then(n=>{r==null||r(n)})},(r,n)=>{o().then(()=>{n==null||n({err:"error"})})},(r,n)=>{m().then(()=>{n==null||n({error:"error"})})}],option:{onError:r=>{u.value+=1},onSuccess:r=>{a.value.push(r)}}}),(r,n)=>(f(),_("div",null,[T("div",null,"error count: "+w(u.value),1),(f(!0),_(A,null,N(a.value,(p,e)=>(f(),_("p",{key:e},w(p),1))),128))]))}});export{C as _};
