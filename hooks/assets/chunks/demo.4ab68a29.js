import"./stringify.47a0d2bd.js";import"./intersection-observer.38c1bba6.js";import{u as g}from"./index.29200b62.js";import{e as P,r as l,o as _,c as f,b as T,t as w,F as b,n as A}from"../app.a057031f.js";function N({task:t,option:u}){const{delay:a=0,onError:i,onReady:o,onSuccess:m}=u!=null?u:{};if(!(t instanceof Array))throw new Error("task must be Array");const r=n=>{i==null||i(n)},e=n=>c=>{r(c),n==null||n({error:c})},p=()=>{var n;(n=Array(...t.keys()))==null||n.reduce((c,h)=>c.then(s=>(s!=null&&s.error||m==null||m(s),new Promise(d=>{var y;(y=t==null?void 0:t[h])==null||y.call(t,d,e(d),h)}))),Promise.resolve())};g(()=>{o==null||o(),p()},a)}const C=P({__name:"demo",setup(t){const u=l(0),a=l([]);function i(){return new Promise((r,e)=>{setTimeout(()=>{r("No.1")},3e3)})}function o(){return new Promise((r,e)=>{setTimeout(()=>{r("No.2")},2e3)})}function m(){return new Promise((r,e)=>{setTimeout(()=>{r("No.3")},2e3)})}return N({task:[r=>{i().then(e=>{r==null||r(e)})},r=>{o().then(e=>{r==null||r(e)})},(r,e)=>{o().then(()=>{e==null||e({err:"error"})})},(r,e)=>{m().then(()=>{e==null||e({error:"error"})})}],option:{onError:r=>{u.value+=1},onSuccess:r=>{a.value.push(r)}}}),(r,e)=>(_(),f("div",null,[T("div",null,"error count: "+w(u.value),1),(_(!0),f(b,null,A(a.value,(p,n)=>(_(),f("p",{key:n},w(p),1))),128))]))}});export{C as _};
