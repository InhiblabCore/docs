import"./stringify.5af4e30a.js";import{u as y}from"./index.e41271d5.js";import{g as b}from"./domTarget.02790cf3.js";import{u as S}from"./useEffectWithTarget.41a95ea6.js";import{r as v,d as k,o as f,c as D,t as L,u as R,e as x,q as N,F as _,n as h,b as B}from"../app.e65c0f9d.js";import"./intersection-observer.38c1bba6.js";const F=(g,l,t={})=>{const s=v(t);S(()=>{const e=b(l);if(!(e!=null&&e.addEventListener))return;const i=o=>{var d,c,p;(c=(d=s.value).onDragStart)==null||c.call(d,o),(p=o.dataTransfer)==null||p.setData("custom",JSON.stringify(g))},u=o=>{var d,c;(c=(d=s.value).onDragEnd)==null||c.call(d,o)};return e.setAttribute("draggable",`${(t==null?void 0:t.draggable)!==void 0?t==null?void 0:t.draggable:!0}`),e.addEventListener("dragstart",i),e.addEventListener("dragend",u),()=>{e.removeEventListener("dragstart",i),e.removeEventListener("dragend",u)}},[],l)},O=(g,l={})=>{const t=v(l),s=v();S(()=>{const e=b(g);if(!(e!=null&&e.addEventListener))return;const i=(r,a)=>{const n=r.getData("text/uri-list"),E=r.getData("custom");if(E&&t.value.onDom){let m=E;try{m=JSON.parse(E)}catch{m=E}t.value.onDom(m,a);return}if(n&&t.value.onUri){t.value.onUri(n,a);return}if(r.files&&r.files.length&&t.value.onFiles){t.value.onFiles(Array.from(r.files),a);return}r.items&&r.items.length&&t.value.onText&&r.items[0].getAsString(m=>{t.value.onText(m,a)})},u=r=>{var a,n;r.preventDefault(),r.stopPropagation(),s.value=r.target,(n=(a=t.value).onDragEnter)==null||n.call(a,r)},o=r=>{var a,n;r.preventDefault(),(n=(a=t.value).onDragOver)==null||n.call(a,r)},d=r=>{var a,n;r.target===s.value&&((n=(a=t.value).onDragLeave)==null||n.call(a,r))},c=r=>{var a,n;r.preventDefault(),i(r.dataTransfer,r),(n=(a=t.value).onDrop)==null||n.call(a,r)},p=r=>{var a,n;i(r.clipboardData,r),(n=(a=t.value).onPaste)==null||n.call(a,r)};return e.addEventListener("dragenter",u),e.addEventListener("dragover",o),e.addEventListener("dragleave",d),e.addEventListener("drop",c),e.addEventListener("paste",p),()=>{e.removeEventListener("dragenter",u),e.removeEventListener("dragover",o),e.removeEventListener("dragleave",d),e.removeEventListener("drop",c),e.removeEventListener("paste",p)}},[],g)},$=k({__name:"DragDemo",props:{data:null},setup(g){const l=g,[t,{set:s}]=y(!1),e=v(null);return F(l.data,e,{onDragStart:()=>{s(!0)},onDragEnd:()=>{s(!1)}}),(i,u)=>(f(),D("div",{ref_key:"dragRef",ref:e,style:{border:"1px solid #e8e8e8",padding:"16px",width:"100px","text-align":"center","margin-right":"16px"}},L(R(t)?"dragging":`box-${g.data}`),513))}}),A={style:{"margin-top":"8px"}},C=k({__name:"demo",setup(g){const l=v(null),t=v([]),[s,{set:e}]=y(!1);return O(l,{onDom:(i,u)=>{t.value.push(`custom: ${i} dropped`),e(!1)},onDragEnter:()=>e(!0),onDragLeave:()=>e(!1)}),(i,u)=>(f(),D("div",null,[x("div",{ref_key:"dropRef",ref:l,style:{border:"1px dashed #e8e8e8",padding:"16px","text-align":"center","max-height":"400px","overflow-y":"scroll"}},[N(L(R(s)?"release here":"drop here")+" ",1),(f(!0),D(_,null,h(t.value,(o,d)=>(f(),D("p",{key:d},L(o),1))),128))],512),x("div",A,[(f(),D(_,null,h(["1","2","3","4","5","6","7","8","9","10","11","12","13"],o=>B($,{key:o,data:o},null,8,["data"])),64))])]))}});export{C as _};
